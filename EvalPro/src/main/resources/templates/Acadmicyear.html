<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Table with Dropdowns</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for Trash and Edit Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        .highlight {
            background-color: yellow;
            font-weight: bold;
        }
        .no-results {
            margin-top: 20px;
            font-size: 18px;
            color: #ff0000;
            display: none;
        }
        .action-button {
            margin: 0 4px;
        }
    </style>
</head>
<body class="bg-light">

    <div class="container mt-5">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Academic </h4>
            </div>
            <div class="card-body">
                <!-- Input Container -->
                <div class="mb-4">
                    <div class="input-group">
                        <input type="text" id="new-item-input" name="Academic"class="form-control" placeholder="Enter Academic Year (e.g. 2025-2026)">
                        <button id="add-button" class="btn btn-success ms-2 rounded" name="add-pattern">Add New Pattern</button>
                    </div>
                </div>

                <!-- Search Container -->
                <div class="mb-4">
                    <input type="text" id="pattern-input" class="form-control" placeholder="Search  Academic Year...">
                </div>

                <!-- No Results Message -->
                <div class="no-results text-center" id="no-results">No results found.</div>

                <!-- Table -->
                <div class="table-responsive">
                    <table id="results-table" class="table table-bordered table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th class="text-center">ID</th>
                                <th>Content</th>
                                <th class="text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Table rows will be populated here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="text-center mt-4" id="pagination">
                    <!-- Pagination buttons will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <script>
        let data = [
            { id: 1, content: "Apple" },
            { id: 2, content: "Banana" },
            { id: 3, content: "Orange" },
            { id: 4, content: "Pineapple" },
            { id: 5, content: "Grape" },
        ];

        let filteredData = [];
        const itemsPerPage = 5;
        let currentPage = 1;
        let nextId = data.length + 1;

        // Add new item to the table
        document.getElementById('add-button').addEventListener('click', function() {
            const newItemInput = document.getElementById('new-item-input');
            const newItemText = newItemInput.value.trim();

            if (newItemText) {
                data.push({ id: nextId++, content: newItemText });
                newItemInput.value = ''; // Clear the input
                filterData();
            }
        });

        // Live search functionality
        document.getElementById('pattern-input').addEventListener('input', function() {
            currentPage = 1;
            filterData();
        });

        function filterData() {
            const pattern = document.getElementById('pattern-input').value.toLowerCase();
            filteredData = data.filter(item => item.content.toLowerCase().includes(pattern));
            renderTable();
            renderPagination();
            toggleNoResultsMessage();
        }

        function renderTable() {
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageData = filteredData.slice(start, end);

            const tbody = document.querySelector('#results-table tbody');
            tbody.innerHTML = ''; // Clear table before re-rendering

            const pattern = document.getElementById('pattern-input').value.toLowerCase();
            const regex = new RegExp(pattern, 'gi');

            pageData.forEach(item => {
                const highlightedContent = item.content.replace(regex, match => `<span class="highlight">${match}</span>`);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="text-center">${item.id}</td>
                    <td>${highlightedContent}</td>
                    <td class="text-center">
                        <div class="d-flex justify-content-center align-items-center gap-2">
                            <button class="btn btn-warning btn-sm" onclick="editItem(${item.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteItem(${item.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderPagination() {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';

            const prevButton = document.createElement('button');
            prevButton.innerText = 'Previous';
            prevButton.className = 'btn btn-primary me-2';
            prevButton.disabled = currentPage === 1;
            prevButton.addEventListener('click', function() {
                if (currentPage > 1) {
                    currentPage--;
                    renderTable();
                    renderPagination();
                }
            });
            paginationDiv.appendChild(prevButton);

            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement('button');
                button.innerText = i;
                button.className = `btn btn-outline-primary me-2 ${i === currentPage ? 'active' : ''}`;
                button.disabled = i === currentPage;
                button.addEventListener('click', function() {
                    currentPage = i;
                    renderTable();
                    renderPagination();
                });
                paginationDiv.appendChild(button);
            }

            const nextButton = document.createElement('button');
            nextButton.innerText = 'Next';
            nextButton.className = 'btn btn-primary';
            nextButton.disabled = currentPage === totalPages;
            nextButton.addEventListener('click', function() {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderTable();
                    renderPagination();
                }
            });
            paginationDiv.appendChild(nextButton);
        }

        function toggleNoResultsMessage() {
            const noResultsDiv = document.getElementById('no-results');
            noResultsDiv.style.display = filteredData.length === 0 ? 'block' : 'none';
        }

        function deleteItem(id) {
            data = data.filter(item => item.id !== id);
            filterData();
        }

        function editItem(id) {
            const item = data.find(item => item.id === id);
            const newContent = prompt("Edit the content:", item.content);
            if (newContent !== null) {
                item.content = newContent.trim();
                filterData();
            }
        } 

        // Initial render
        filteredData = [...data];
        renderTable();
        renderPagination();
    </script>

</body>
</html>
